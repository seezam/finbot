# Процесс деплоя на Railway

## Как работает автоматический деплой

Railway автоматически деплоит ваш проект из GitHub при каждом пуше в ветку `master` (или `main`).

## Процесс обновления:

1. **Вы делаете изменения в коде** локально
2. **Коммитите изменения:**
   ```bash
   git add .
   git commit -m "Описание изменений"
   ```
3. **Пушите в GitHub:**
   ```bash
   git push
   ```
4. **Railway автоматически:**
   - Обнаруживает новый коммит в GitHub
   - Начинает сборку (build) проекта
   - Устанавливает зависимости (`npm install`)
   - Запускает приложение (`node server.js`)
   - Перезапускает сервис с новым кодом

## Где посмотреть статус деплоя:

1. Откройте ваш проект на https://railway.app
2. Перейдите в раздел **"Deployments"**
3. Там вы увидите:
   - Все деплои (история)
   - Статус текущего деплоя (Building, Deploying, Active, Failed)
   - Логи сборки и запуска
   - Время деплоя

## Время деплоя:

Обычно деплой занимает **1-3 минуты**:
- Сборка: ~30-60 секунд
- Деплой: ~10-30 секунд
- Перезапуск: ~10-20 секунд

## Проверка успешного деплоя:

После деплоя проверьте:
```bash
# Health check
curl https://finbot-production-19c7.up.railway.app/health

# Должен вернуть: {"status":"ok"}
```

## Если деплой не прошел:

1. Проверьте логи в Railway: **Deployments** → последний деплой → **View Logs**
2. Проверьте, что все файлы закоммичены и запушены
3. Убедитесь, что нет ошибок в коде (Railway покажет их в логах)

## Ручной деплой (если нужно):

Если автоматический деплой отключен, можно задеплоить вручную через Railway CLI:
```bash
railway up
```

Но обычно это не нужно - автоматический деплой работает отлично!

## Важно:

- ✅ Все изменения должны быть закоммичены и запушены в GitHub
- ✅ Railway деплоит только из подключенного репозитория
- ✅ Переменные окружения (BOT_TOKEN, ALLOWED_USER_ID) сохраняются между деплоями
- ✅ Webhook настраивается один раз и не сбрасывается при деплое

